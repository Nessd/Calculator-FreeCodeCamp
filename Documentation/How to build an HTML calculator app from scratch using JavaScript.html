<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>How to build an HTML calculator app from scratch using JavaScript</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism.css">
    <link rel="stylesheet" type="text/css" href="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-unescaped-markup.css">

    <link href="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/css.css" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/screen.css">
    <link rel="stylesheet" type="text/css" href="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/algolia-search.css">
    
    <script type="text/javascript" async="" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/analytics.js"></script><script src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/algoliasearch.js"></script>
    <script src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/autocomplete.js"></script>

    <link rel="shortcut icon" href="https://www.freecodecamp.org/news/favicon.png" type="image/png">
    <link rel="canonical" href="https://www.freecodecamp.org/news/how-to-build-an-html-calculator-app-from-scratch-using-javascript-4454b8714b98/">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="https://www.freecodecamp.org/news/how-to-build-an-html-calculator-app-from-scratch-using-javascript-4454b8714b98/amp/">
    
    <meta property="og:site_name" content="Developer News">
    <meta property="og:type" content="article">
    <meta property="og:title" content="How to build an HTML calculator app from scratch using JavaScript">
    <meta property="og:description" content="by Zell Liew

How to build an HTML calculator app from scratch using JavaScript
This is an epic article where you learn how to build a calculator from scratch.
We’ll focus on the JavaScript you need to write—how to think about building the
calculator, how to write the code, and eventually, how to clean up your code.

By the end of the article, you should get a calculator that functions exactly
like an iPhone calculator (without the +/-  and percentage functionalities).

The prerequisites
Before ">
    <meta property="og:url" content="https://www.freecodecamp.org/news/how-to-build-an-html-calculator-app-from-scratch-using-javascript-4454b8714b98/">
    <meta property="og:image" content="https://cdn-images-1.medium.com/max/800/0*7GfUdSILXBLyAbQy.png">
    <meta property="article:published_time" content="2018-05-03T01:41:38.000Z">
    <meta property="article:modified_time" content="2019-06-07T07:46:30.000Z">
    <meta property="article:tag" content="JavaScript">
    <meta property="article:tag" content="Tutorial">
    <meta property="article:tag" content="Tech">
    <meta property="article:tag" content="Programming">
    <meta property="article:tag" content="Learning To Code">
    
    <meta property="article:publisher" content="https://www.facebook.com/freecodecamp">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="How to build an HTML calculator app from scratch using JavaScript">
    <meta name="twitter:description" content="by Zell Liew

How to build an HTML calculator app from scratch using JavaScript
This is an epic article where you learn how to build a calculator from scratch.
We’ll focus on the JavaScript you need to write—how to think about building the
calculator, how to write the code, and eventually, how to clean up your code.

By the end of the article, you should get a calculator that functions exactly
like an iPhone calculator (without the +/-  and percentage functionalities).

The prerequisites
Before ">
    <meta name="twitter:url" content="https://www.freecodecamp.org/news/how-to-build-an-html-calculator-app-from-scratch-using-javascript-4454b8714b98/">
    <meta name="twitter:image" content="https://cdn-images-1.medium.com/max/800/0*7GfUdSILXBLyAbQy.png">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="freeCodeCamp.org">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="JavaScript, Tutorial, Tech, Programming, Learning To Code">
    <meta name="twitter:site" content="@freecodecamp">
    <meta property="og:image:width" content="800">
    <meta property="og:image:height" content="738">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Developer News",
        "logo": "https://cdn-media-1.freecodecamp.org/ghost/2018/12/FCC-logo-white.png"
    },
    "author": {
        "@type": "Person",
        "name": "freeCodeCamp.org",
        "image": {
            "@type": "ImageObject",
            "url": "//www.gravatar.com/avatar/fcda43852608626fe46d7fd43145766e?s=250&d=mm&r=x",
            "width": 250,
            "height": 250
        },
        "url": "https://www.freecodecamp.org/news/author/freecodecamp/",
        "sameAs": []
    },
    "headline": "How to build an HTML calculator app from scratch using JavaScript",
    "url": "https://www.freecodecamp.org/news/how-to-build-an-html-calculator-app-from-scratch-using-javascript-4454b8714b98/",
    "datePublished": "2018-05-03T01:41:38.000Z",
    "dateModified": "2019-06-07T07:46:30.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://cdn-images-1.medium.com/max/800/0*7GfUdSILXBLyAbQy.png",
        "width": 800,
        "height": 738
    },
    "keywords": "JavaScript, Tutorial, Tech, Programming, Learning To Code",
    "description": "by Zell Liew\n\nHow to build an HTML calculator app from scratch using JavaScript\nThis is an epic article where you learn how to build a calculator from scratch.\nWe’ll focus on the JavaScript you need to write—how to think about building the\ncalculator, how to write the code, and eventually, how to clean up your code.\n\nBy the end of the article, you should get a calculator that functions exactly\nlike an iPhone calculator (without the +/-  and percentage functionalities).\n\nThe prerequisites\nBefore ",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://www.freecodecamp.org/news/"
    }
}
    </script>

    <meta name="generator" content="Ghost 2.25">
    <link rel="alternate" type="application/rss+xml" title="Developer News" href="https://www.freecodecamp.org/news/rss/">
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/js.js"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-55446531-20');
</script>

<style id="fit-vids-style">.fluid-width-video-container{flex-grow: 1;width:100%;}.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style></head>

<body class="post-template tag-javascript tag-tutorial tag-tech tag-programming tag-learning-to-code">

    <div class="site-wrapper">
        <nav class="site-nav nav-padding">
    <div class="site-nav-left">
        <form onsubmit="event.preventDefault();">
  <span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;"><input type="search" placeholder="Search 5,000+ tutorials" id="search-input" class="aa-input" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-owns="algolia-autocomplete-listbox-0" style="position: relative; vertical-align: top;" dir="auto"><pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: Lato, sans-serif; font-size: 18px; font-style: normal; font-variant: normal; font-weight: 400; word-spacing: 0px; letter-spacing: normal; text-indent: 0px; text-rendering: optimizelegibility; text-transform: none;"></pre><span class="aa-dropdown-menu" style="position: absolute; top: 100%; z-index: 100; display: none; left: 0px; right: auto;" role="listbox" id="algolia-autocomplete-listbox-0"><div class="aa-dataset-1"></div></span></span>
</form>

<script>
  const client = algoliasearch('CFFN61U0SH', 'ec3afbefdb556803e63a67f269655aa8');
  const index = client.initIndex('news');
  autocomplete('#search-input', { hint: false }, [
    {
      source: autocomplete.sources.hits(index, { hitsPerPage: 8 }),
      debounce: 250,
      templates: {
        suggestion: (suggestion, result) => {
          return `
            <a href="${suggestion.url}">
              <div class="algolia-result">
                <span>${suggestion._highlightResult.title.value}</span>
              </div>
            </a>
          `;
        },
        empty: (options) => {
          return `
            <div class="algolia-result">
              No tutorials found
            </div>
          `;
        },
        footer: (query, result) => {
          if (!query.isEmpty) {
            return `
              <a href="https://freecodecamp.org/news/search?query=${result.query}">
                <div class="algolia-result algolia-footer">
                  <span>See all results for ${result.query}</span>
                </div>
              </a>
            `;
          }
        }
      }
    }
  ]).on('autocomplete:selected', (event, suggestion, dataset, context) => {
    // Set to true if hit is selected by mouse or enter key
    hitSelected = true;
    // Do nothing on click, as the browser will already do it
    if (context.selectionMethod === 'click') {
      return;
    }
    // Change the page, for example, on other events
    window.location.assign(suggestion.url);
  });

  // If no hits in the Autocomplete dropdown are highlighted,
  // treat input like normal search bar
  const input = document.getElementById("search-input");
  let hitSelected;

  input.addEventListener("keydown", (event) => {
    const searchQuery = input.value;
    if (event.key === "Enter" && !hitSelected) {
      window.location.assign(`https://freecodecamp.org/news/search?query=${searchQuery}`);
    }
  });
</script>    </div>
    <div class="site-nav-middle">
        <a class="site-nav-logo" href="https://www.freecodecamp.org/news"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/FCC-logo-white.png" alt="Developer News"></a>
    </div>
    <div class="site-nav-right main-nav">
        <div class="main-nav-group">
            <ul class="nav" role="menu">
    <li class="nav-learn" role="menuitem"><a href="https://learn.freecodecamp.org/">Learn</a></li>
    <li class="nav-forum" role="menuitem"><a href="https://www.freecodecamp.org/forum/">Forum</a></li>
    <li class="nav-news" role="menuitem"><a href="https://www.freecodecamp.org/news/">News</a></li>
</ul>

        </div>
    </div>
    <button class="site-nav-right toggle-button-nav">
        Menu
    </button>
</nav>


        




<main id="site-main" class="site-main outer">
    <div class="inner">

        <article class="post-full post tag-javascript tag-tutorial tag-tech tag-programming tag-learning-to-code ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="2018-05-02">2 May 2018</time>
                    <span class="date-divider">/</span>
                    <a href="https://www.freecodecamp.org/news/tag/javascript/">
                        #JavaScript
                    </a>
                </section>
                <h1 class="post-full-title">How to build an HTML calculator app from scratch using JavaScript</h1>
            </header>

            <div class="post-full-author-header">


            </div>

            
<div class="social-row">
    <button class="twitter" onclick="window.open('https://twitter.com/share?text=How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript&amp;url=https://www.freecodecamp.org/news/how-to-build-an-html-calculator-app-from-scratch-using-javascript-4454b8714b98/', 'share-twitter', 'width=550,height=235');return false;">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
    <path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"></path>
    </svg> <span>&nbsp;Tweet this to your followers</span></button>
    <div></div>
    <button class="email" onclick="window.location.href = 'mailto:?subject=helpful freeCodeCamp article: How to build an HTML calculator app from scratch using JavaScript  &amp;body=How to build an HTML calculator app from scratch using JavaScript https://www.freecodecamp.org/news/how-to-build-an-html-calculator-app-from-scratch-using-javascript-4454b8714b98/';">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid meet" viewBox="0 0 640 640" width="32" height="32">
    <defs>
        <path d="M0 100L640 100L320 360L0 100Z" id="b1cw6CIsqS"></path>
        <path d="M0 537.18L0 160L320 420L640 160L640 541.1L0 537.18Z" id="aAHuzNbff"></path>
    </defs>
    <g>

        <use xlink:href="#b1cw6CIsqS" opacity="1" fill-opacity="1"></use>
        <path d="M0 100L640 100L320 360L0 100Z" id="c2GF8nL4hl" fill="white" fill-opacity="1" filter="url(#shadow605849)"></path>
        <use xlink:href="#aAHuzNbff" opacity="1" fill-opacity="1"></use>
        <path d="M0 537.18L0 160L320 420L640 160L640 541.1L0 537.18Z" id="a5mitN1KH" fill="white" fill-opacity="1" filter="url(#shadow15043397)"></path>

    </g>
</svg> <span>Email this to a friend</span></button>

    <div></div>
    <button class="facebook" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=https://www.freecodecamp.org/news/author/freecodecamp/', 'share-facebook','width=580,height=296');return false;">
        <!-- Facebook Filled icon by Icons8 -->



<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid meet" viewBox="0 0 640 640" width="32" height="32">
    <defs>
        <path d="M640 321.89C640 482.61 523.62 615.43 369.16 638.11C368.42 630.47 367.98 556.08 367.83 414.93C395.49 414.61 420.42 414.27 442.61 413.9C446.4 380.3 452.55 347.37 456.62 323.22C425.51 322.93 388.88 323.31 367.83 323.22C368.37 281.18 368.35 303.77 367.83 262.54C372.62 222.64 384.99 209.96 459.86 213.65C459.57 203.36 460.61 151.4 459.86 133.3C460.87 134.09 279.13 86.74 269.33 241.43C268.52 265.86 268.65 290.49 269.33 323.22C265.63 322.84 238.44 322.84 187.75 323.22L187.75 414.93L269.33 414.93C270.65 564.06 270.21 638.45 268 638.11C114.78 614.35 0 481.73 0 321.89C0 145.28 143.39 1.89 320 1.89C496.61 1.89 640 145.28 640 321.89Z" id="bS1mFenfS"></path>
    </defs>
    <g>
        <g>
            <g>
                <use xlink:href="#bS1mFenfS"></use>
            </g>
        </g>
    </g>
</svg> <span>Share this with your friends</span></button>
</div>
            <figure class="post-full-image">
                <img srcset="https://cdn-images-1.medium.com/max/800/0*7GfUdSILXBLyAbQy.png 300w,
                            https://cdn-images-1.medium.com/max/800/0*7GfUdSILXBLyAbQy.png 600w,
                            https://cdn-images-1.medium.com/max/800/0*7GfUdSILXBLyAbQy.png 1000w,
                            https://cdn-images-1.medium.com/max/800/0*7GfUdSILXBLyAbQy.png 2000w" sizes="(max-width: 800px) 400px,
                            (max-width: 1170px) 700px,
                            1400px" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/07GfUdSILXBLyAbQy.png" alt="How to build an HTML calculator app from scratch using JavaScript">
            </figure>

            <section class="post-full-content">
                <div class="post-content medium-migrated-article">
                    <p>by Zell Liew</p><h1 id="how-to-build-an-html-calculator-app-from-scratch-using-javascript">How to build an HTML calculator app from scratch using JavaScript</h1><p>This
 is an epic article where you learn how to build a calculator from 
scratch. We’ll focus on the JavaScript you need to write—how to think 
about building the calculator, how to write the code, and eventually, 
how to clean up your code.</p><p>By the end of the article, you should get a calculator that functions exactly like an iPhone calculator (without the <code>+/-</code> and percentage functionalities).</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/Cw7jNVIhWFV4NSNY8-Lv8uX4583Hr5LvzYFq.gif" class="kg-image"></figure><!--kg-card-end: image--><h3 id="the-prerequisites">The prerequisites</h3><p>Before
 you attempt follow through the lesson, please make sure you have a 
decent command of JavaScript. Minimally, you need to know these things:</p><ol><li><a href="https://zellwk.com/blog/js-if-else" rel="noopener">If/else statements</a></li><li><a href="https://zellwk.com/blog/js-for-loops" rel="noopener">For loops</a></li><li><a href="https://zellwk.com/blog/js-functions" rel="noopener">JavaScript functions</a></li><li><a href="https://zellwk.com/blog/es6/#arrow-functions" rel="noopener">Arrow functions</a></li><li><code>&amp;&amp;</code> and <code>||</code> operators</li><li>How to change the text with the <code>textContent</code> property</li><li>How to add event listeners with the event delegation pattern</li></ol><h3 id="before-you-begin">Before you begin</h3><p>I
 urge you to try and build the calculator yourself before following the 
lesson. It’s good practice, because you’ll train yourself to think like a
 developer.</p><p>Come back to this lesson once you’ve tried for one 
hour (doesn’t matter whether you succeed or fail. When you try, you 
think, and that’ll help you absorb the lesson in double quick time).</p><p>With that, let’s begin by understanding how a calculator works.</p><h3 id="building-the-calculator">Building the calculator</h3><p>First, we want to build the calculator.</p><p>The calculator consist of two parts: the display and the keys.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/rfV0r9RtFghhau8sZU5CzOFMuJAT1H48tFeL.png" class="kg-image"></figure><!--kg-card-end: image--><!--kg-card-begin: code--><pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span>”calculator”</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span>”calculator__display”</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span>”calculator__keys”</span><span class="token punctuation">&gt;</span></span> … <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre><!--kg-card-end: code--><p>We
 can use CSS Grid to make the keys, since they’re arranged in a 
grid-like format. This has already been done for you in the starter 
file. You can find the starter file at <a href="https://codepen.io/zellwk/pen/pLgmGL" rel="noopener">this pen</a>.</p><!--kg-card-begin: code--><pre class=" language-css"><code class=" language-css"><span class="token selector">.calculator__keys</span> <span class="token punctuation">{</span> 
  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span> 
  <span class="token comment">/* other necessary CSS */</span> 
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>To
 help us identify operator, decimal, clear, and equal keys, we’re going 
to supply a data-action attribute that describes what they do.</p><!--kg-card-begin: code--><pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>calculator__keys<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>key--operator<span class="token punctuation">"</span></span> <span class="token attr-name">data-action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>add<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>key--operator<span class="token punctuation">"</span></span> <span class="token attr-name">data-action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>subtract<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span>
  <span class="token attr-name">&lt;button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>key--operator<span class="token punctuation">"</span></span> <span class="token attr-name">data-action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>multiply<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token entity" title="×">&amp;times;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>key--operator<span class="token punctuation">"</span></span> <span class="token attr-name">data-action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>divide<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>÷<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span>
  <span class="token attr-name">&lt;button</span><span class="token punctuation">&gt;</span></span>7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>9<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">data-action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>decimal<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">data-action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>clear<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>AC<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>key--equal<span class="token punctuation">"</span></span> <span class="token attr-name">data-action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>calculate<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>=<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre><!--kg-card-end: code--><h3 id="listening-to-key-presses">Listening to key-presses</h3><p>Five things can happen when a person gets hold of a calculator. They can hit:</p><ol><li>a number key (0–9)</li><li>an operator key (+, -, ×, ÷)</li><li>the decimal key</li><li>the equals key</li><li>the clear key</li></ol><p>The
 first steps to building this calculator are to be able to (1) listen 
for all keypresses and (2) determine the type of key that is pressed. In
 this case, we can use an event delegation pattern to listen, since keys
 are all children of <code>.calculator__keys</code>.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> calculator <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>‘<span class="token punctuation">.</span>calculator’<span class="token punctuation">)</span>
<span class="token keyword">const</span> keys <span class="token operator">=</span> calculator<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>‘<span class="token punctuation">.</span>calculator__keys’<span class="token punctuation">)</span>

keys<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>‘click’<span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span>‘button’<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// Do something</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><!--kg-card-end: code--><p>Next, we can use the <code>data-action</code> attribute to determine the type of key that is clicked.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> key <span class="token operator">=</span> e<span class="token punctuation">.</span>target
<span class="token keyword">const</span> action <span class="token operator">=</span> key<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>action</code></pre><!--kg-card-end: code--><p>If the key does not have a <code>data-action</code> attribute, it must be a number key.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'number key!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>If the key has a <code>data-action</code> that is either <code>add</code>, <code>subtract</code>, <code>multiply</code> or <code>divide</code>, we know the key is an operator.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>
  action <span class="token operator">===</span> <span class="token string">'add'</span> <span class="token operator">||</span>
  action <span class="token operator">===</span> <span class="token string">'subtract'</span> <span class="token operator">||</span>
  action <span class="token operator">===</span> <span class="token string">'multiply'</span> <span class="token operator">||</span>
  action <span class="token operator">===</span> <span class="token string">'divide'</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'operator key!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>If the key’s <code>data-action</code> is <code>decimal</code>, we know the user clicked on the decimal key.</p><p>Following the same thought process, if the key’s <code>data-action</code> is <code>clear</code>, we know the user clicked on the clear (the one that says AC) key. If the key’s <code>data-action</code> is <code>calculate</code>, we know the user clicked on the equals key.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'decimal'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'decimal key!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'clear'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'clear key!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'equal key!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>At this point, you should get a <code>console.log</code> response from every calculator key.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/lbXTncsu2Ni5V-Ejx6RYCO-kW8XJm7f5woGC.gif" class="kg-image"></figure><!--kg-card-end: image--><h3 id="building-the-happy-path">Building the happy path</h3><p>Let’s consider what the average person would do when they pick up a calculator. <strong>This “what the average person would do” is called the happy path</strong>.</p><p>Let’s call our average person Mary.</p><p>When Mary picks up a calculator, she could hit any of these keys:</p><ol><li>a number key (0–9)</li><li>an operator key (+, -, ×, ÷)</li><li>the decimal key</li><li>the equal key</li><li>the clear key</li></ol><p>It can be overwhelming to consider five types of keys at once, so let’s take it step by step.</p><h3 id="when-a-user-hits-a-number-key">When a user hits a number key</h3><p>At this point, if the calculator shows 0 (the default number), the target number should replace zero.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/mpr4JFLSU-MHaq8LPMedsaDxnU5Y-MTx56SU.gif" class="kg-image"></figure><!--kg-card-end: image--><p>If the calculator shows a non-zero number, the target number should be appended to the displayed number.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/PNfa-nAlgIBtFt1MaVEDvuzisaIps6Kdb482.gif" class="kg-image"></figure><!--kg-card-end: image--><p>Here, we need to know two things:</p><ol><li>The number of the key that was clicked</li><li>The current displayed number</li></ol><p>We can get these two values through the <code>textContent</code> property of the clicked key and <code>.calculator__display</code> , respectively.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> display <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.calculator__display'</span><span class="token punctuation">)</span>

keys<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> key <span class="token operator">=</span> e<span class="token punctuation">.</span>target
    <span class="token keyword">const</span> action <span class="token operator">=</span> key<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>action
    <span class="token keyword">const</span> keyContent <span class="token operator">=</span> key<span class="token punctuation">.</span>textContent
    <span class="token keyword">const</span> displayedNum <span class="token operator">=</span> display<span class="token punctuation">.</span>textContent
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><!--kg-card-end: code--><p><strong>If the calculator shows 0, we want to replace the calculator’s display with the clicked key.</strong> We can do so by replacing the display’s textContent property.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>displayedNum <span class="token operator">===</span> <span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> keyContent
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p><strong>If the calculator shows a non-zero number, we want to append the clicked key to the displayed number.</strong> To append a number, we concatenate a string.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>displayedNum <span class="token operator">===</span> <span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> keyContent
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> displayedNum <span class="token operator">+</span> keyContent
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>At this point, Mary may click either of these keys:</p><ol><li>A decimal key</li><li>An operator key</li></ol><p>Let’s say Mary hits the decimal key.</p><h3 id="when-a-user-hits-the-decimal-key">When a user hits the decimal key</h3><p>When
 Mary hits the decimal key, a decimal should appear on the display. If 
Mary hits any number after hitting a decimal key, the number should be 
appended on the display as well.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/5Pc6RLFHdPNzPi3BrlXJSs3xrFf2L90A2WXx.png" class="kg-image"></figure><!--kg-card-end: image--><p>To create this effect, we can concatenate <code>.</code> to the displayed number.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'decimal'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> displayedNum <span class="token operator">+</span> <span class="token string">'.'</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Next, let’s say Mary continues her calculation by hitting an operator key.</p><h3 id="when-a-user-hits-an-operator-key">When a user hits an operator key</h3><p>If Mary hits an operator key, the operator should be highlighted so Mary knows the operator is active.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/VarwRgJGrN0mwcgYGpX1Zw54QRfbXdMmQNEG.gif" class="kg-image"></figure><!--kg-card-end: image--><p>To do so, we can add the <code>is-depressed</code> class to the operator key.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>
  action <span class="token operator">===</span> <span class="token string">'add'</span> <span class="token operator">||</span>
  action <span class="token operator">===</span> <span class="token string">'subtract'</span> <span class="token operator">||</span>
  action <span class="token operator">===</span> <span class="token string">'multiply'</span> <span class="token operator">||</span>
  action <span class="token operator">===</span> <span class="token string">'divide'</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  key<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'is-depressed'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Once Mary has hit an operator key, she’ll hit another number key.</p><h3 id="when-a-user-hits-a-number-key-after-an-operator-key">When a user hits a number key after an operator key</h3><p>When
 Mary hits a number key again, the previous display should be replaced 
with the new number. The operator key should also release its pressed 
state.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/GDuLfupPob7rW0UWTH6RqI5CuQX36vcILKwo.gif" class="kg-image"></figure><!--kg-card-end: image--><p>To release the pressed state, we remove the <code>is-depressed</code> class from all keys through a <code>forEach</code> loop:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js">keys<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> key <span class="token operator">=</span> e<span class="token punctuation">.</span>target
    <span class="token comment">// ...</span>
    
    <span class="token comment">// Remove .is-depressed class from all keys</span>
    Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>children<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">k</span> <span class="token operator">=&gt;</span> k<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'is-depressed'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><!--kg-card-end: code--><p>Next,
 we want to update the display to the clicked key. Before we do this, we
 need a way to tell if the previous key is an operator key.</p><p>One way to do this is through a custom attribute. Let’s call this custom attribute <code>data-previous-key-type</code>.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> calculator <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.calculator'</span><span class="token punctuation">)</span>
<span class="token comment">// ...</span>

keys<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      action <span class="token operator">===</span> <span class="token string">'add'</span> <span class="token operator">||</span>
      action <span class="token operator">===</span> <span class="token string">'subtract'</span> <span class="token operator">||</span>
      action <span class="token operator">===</span> <span class="token string">'multiply'</span> <span class="token operator">||</span>
      action <span class="token operator">===</span> <span class="token string">'divide'</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      key<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'is-depressed'</span><span class="token punctuation">)</span>
      <span class="token comment">// Add custom attribute</span>
      calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'operator'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><!--kg-card-end: code--><p>If the <code>previousKeyType</code> is an operator, we want to replace the displayed number with clicked number.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> previousKeyType <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>displayedNum <span class="token operator">===</span> <span class="token string">'0'</span> <span class="token operator">||</span> previousKeyType <span class="token operator">===</span> <span class="token string">'operator'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> keyContent
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> displayedNum <span class="token operator">+</span> keyContent
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Next, let’s say Mary decides to complete her calculation by hitting the equals key.</p><h3 id="when-a-user-hits-the-equals-key">When a user hits the equals key</h3><p>When Mary hits the equals key, the calculator should calculate a result that depends on three values:</p><ol><li>The <strong>first number</strong> entered into the calculator</li><li>The <strong>operator</strong></li><li>The <strong>second number</strong> entered into the calculator</li></ol><p>After the calculation, the result should replace the displayed value.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/TMFTHXrjCGzKQBIzBFApP7usoJCjcQ-oz2Jc.gif" class="kg-image"></figure><!--kg-card-end: image--><p>At this point, we only know the <strong>second number</strong> — that is, the currently displayed number.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> secondValue <span class="token operator">=</span> displayedNum
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>To get the <strong>first number</strong>,
 we need to store the calculator’s displayed value before we wipe it 
clean. One way to save this first number is to add it to a custom 
attribute when the operator button gets clicked.</p><p>To get the <strong>operator</strong>, we can also use the same technique.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>
  action <span class="token operator">===</span> <span class="token string">'add'</span> <span class="token operator">||</span>
  action <span class="token operator">===</span> <span class="token string">'subtract'</span> <span class="token operator">||</span>
  action <span class="token operator">===</span> <span class="token string">'multiply'</span> <span class="token operator">||</span>
  action <span class="token operator">===</span> <span class="token string">'divide'</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue <span class="token operator">=</span> displayedNum
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator <span class="token operator">=</span> action
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Once we have the three values we need, we can perform a calculation. Eventually, we want the code to look something like this:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> firstValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue
  <span class="token keyword">const</span> operator <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator
  <span class="token keyword">const</span> secondValue <span class="token operator">=</span> displayedNum
  
  display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token function">calculate</span><span class="token punctuation">(</span>firstValue<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> secondValue<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>That means we need to create a <code>calculate</code> function. It should take in three parameters: the first number, the operator, and the second number.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">calculate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">n1<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> n2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Perform calculation and return calculated value</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>If the operator is <code>add</code>, we want to add values together. If the operator is <code>subtract</code>, we want to subtract the values, and so on.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">calculate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">n1<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> n2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token string">''</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'add'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> n1 <span class="token operator">+</span> n2
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'subtract'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> n1 <span class="token operator">-</span> n2
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'multiply'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> n1 <span class="token operator">*</span> n2
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'divide'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> n1 <span class="token operator">/</span> n2
  <span class="token punctuation">}</span>
  
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Remember that <code>firstValue</code> and <code>secondValue</code> are strings at this point. If you add strings together, you’ll concatenate them (<code>1 + 1 = 11</code>).</p><p>So, before calculating the result, we want to convert strings to numbers. We can do so with the two functions <code>parseInt</code> and <code>parseFloat</code>.</p><ul><li><code>parseInt</code> converts a string into an <strong>integer</strong>.</li><li><code>parseFloat</code> converts a string into a <strong>float</strong> (this means a number with decimal places).</li></ul><p>For a calculator, we need a float.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">calculate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">n1<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> n2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token string">''</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'add'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'subtract'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'multiply'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'divide'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>That’s it for the happy path!</p><p>You can grab the source code for the happy path through <a href="http://calculator-part-1/" rel="noopener">this link</a> (scroll down and enter your email address in the box, and I’ll send the source codes right to your mailbox).</p><h3 id="the-edge-cases">The edge cases</h3><p>The
 hapy path isn’t enough. To build a calculator that’s robust, you need 
to make your calculator resilient to weird input patterns. To do so, you
 have to imagine a troublemaker who tries to break your calculator by 
hitting keys in the wrong order. Let’s call this troublemaker Tim.</p><p>Tim can hit these keys in any order:</p><ol><li>A number key (0–9)</li><li>An operator key (+, -, ×, ÷)</li><li>The decimal key</li><li>The equals key</li><li>The clear key</li></ol><h3 id="what-happens-if-tim-hits-the-decimal-key">What happens if Tim hits the decimal key</h3><p>If Tim hits a decimal key when the display already shows a decimal point, nothing should happen.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/Lbvc-ZcYHO2iWjXIjdYiOVJcmPTmtwkknBw5.gif" class="kg-image"></figure><!--kg-card-end: image--><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/Orj4wS6vgnPAMYFq1xI3DEYXBMS4PWLlSw8a.gif" class="kg-image"></figure><!--kg-card-end: image--><p>Here, we can check that the displayed number contains a <code>.</code> with the <code>includes</code> method.</p><p><code>includes</code> checks strings for a given match. If a string is found, it returns <code>true</code>; if not, it returns <code>false</code>.</p><p><strong>Note</strong>: <code>includes</code> is case sensitive.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token comment">// Example of how includes work.</span>
<span class="token keyword">const</span> string <span class="token operator">=</span> <span class="token string">'The hamburgers taste pretty good!'</span>
<span class="token keyword">const</span> hasExclaimation <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'!'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hasExclaimation<span class="token punctuation">)</span> <span class="token comment">// true</span></code></pre><!--kg-card-end: code--><p>To check if the string already has a dot, we do this:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token comment">// Do nothing if string has a dot</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>displayedNum<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> displayedNum <span class="token operator">+</span> <span class="token string">'.'</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Next, if Tim hits the decimal key after hitting an operator key, the display should show <code>0.</code>.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/fLLhOqkyFZqsOZIxgMPAkpezrUisGpDKFEsw.gif" class="kg-image"></figure><!--kg-card-end: image--><p>Here we need to know if the previous key is an operator. We can tell by checking the the custom attribute, <code>data-previous-key-type</code>, we set in the previous lesson.</p><p><code>data-previous-key-type</code> is not complete yet. To correctly identify if <code>previousKeyType</code> is an operator, we need to update <code>previousKeyType</code> for each clicked key.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKey <span class="token operator">=</span> <span class="token string">'number'</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'decimal'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKey <span class="token operator">=</span> <span class="token string">'decimal'</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'clear'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'clear'</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token comment">// ...</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'calculate'</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Once we have the correct <code>previousKeyType</code>, we can use it to check if the previous key is an operator.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'decimal'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>displayedNum<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> displayedNum <span class="token operator">+</span> <span class="token string">'.'</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>previousKeyType <span class="token operator">===</span> <span class="token string">'operator'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'0.'</span>
  <span class="token punctuation">}</span>
  
calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'decimal'</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><h3 id="what-happens-if-tim-hits-an-operator-key">What happens if Tim hits an operator key</h3><p>If
 Tim hits an operator key first, the operator key should light up. 
(We’ve already covered for this edge case, but how? See if you can 
identify what we did).</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/q3D72rgBjtPOPUltYm1MMIN06dvxGOKyJyUs.gif" class="kg-image"></figure><!--kg-card-end: image--><p>Second,
 nothing should happen if Tim hits the same operator key multiple times.
 (We’ve already covered for this edge case as well).</p><p><strong>Note:</strong>
 if you want to provide better UX, you can show the operator getting 
clicked on repeatedly with some CSS changes. We didn’t do it here, but 
see if you can program that yourself as an extra coding challenge.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/IXW7zY77RWE7tNQ6HZMYma73hsxW44EjWg0n.gif" class="kg-image"></figure><!--kg-card-end: image--><p>Third,
 if Tim hits another operator key after hitting the first operator key, 
the first operator key should be released. Then, the second operator key
 should be depressed. (We covered for this edge case too — but how?).</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/Rez20RY9AcS6ORFWIIumk69YWzwTyv8qseM7.gif" class="kg-image"></figure><!--kg-card-end: image--><p>Fourth,
 if Tim hits a number, an operator, a number and another operator, in 
that order, the display should be updated to a calculated value.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/MAMWFTkNu6Ho8tlMGyJlTfjCbeYq8rO0bQyR.gif" class="kg-image"></figure><!--kg-card-end: image--><p>This means we need to use the <code>calculate</code> function when <code>firstValue</code>, <code>operator</code> and <code>secondValue</code> exist.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>
  action <span class="token operator">===</span> <span class="token string">'add'</span> <span class="token operator">||</span>
  action <span class="token operator">===</span> <span class="token string">'subtract'</span> <span class="token operator">||</span>
  action <span class="token operator">===</span> <span class="token string">'multiply'</span> <span class="token operator">||</span>
  action <span class="token operator">===</span> <span class="token string">'divide'</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> firstValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue
  <span class="token keyword">const</span> operator <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator
  <span class="token keyword">const</span> secondValue <span class="token operator">=</span> displayedNum
  
<span class="token comment">// Note: It's sufficient to check for firstValue and operator because secondValue always exists</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>firstValue <span class="token operator">&amp;&amp;</span> operator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token function">calculate</span><span class="token punctuation">(</span>firstValue<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> secondValue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
key<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'is-depressed'</span><span class="token punctuation">)</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'operator'</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue <span class="token operator">=</span> displayedNum
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator <span class="token operator">=</span> action
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Although
 we can calculate a value when the operator key is clicked for a second 
time, we have also introduced a bug at this point — additional clicks on
 the operator key calculates a value when it shouldn’t.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/8ktjtHeYaRTEn-lPbOM3fhEg3qrvDl5WfOVY.gif" class="kg-image"></figure><!--kg-card-end: image--><p>To prevent the calculator from performing a calculation on subsequent clicks on the operator key, we need to check if the <code>previousKeyType</code> is an operator. If it is, we don’t perform a calculation.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>
  firstValue <span class="token operator">&amp;&amp;</span>
  operator <span class="token operator">&amp;&amp;</span>
  previousKeyType <span class="token operator">!==</span> <span class="token string">'operator'</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token function">calculate</span><span class="token punctuation">(</span>firstValue<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> secondValue<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Fifth,
 after the operator key calculates a number, if Tim hits on a number, 
followed by another operator, the operator should continue with the 
calculation, like this: <code>8 - 1 = 7</code>, <code>7 - 2 = 5</code>, <code>5 - 3 = 2</code>.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/RSsXyuKJe0biqkH-WPDdrGLhFBWmyZ2R1J2Y.gif" class="kg-image"></figure><!--kg-card-end: image--><p>Right now, our calculator cannot make consecutive calculations. The second calculated value is wrong. Here’s what we have: <code>99 - 1 = 98</code>, <code>98 - 1 = 0</code>.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/0r9I8Gu7J9pMbfzUG4hL6tU7RCP-cDhsaGp1.gif" class="kg-image"></figure><!--kg-card-end: image--><p>The second value is calculated wrongly, because we fed the wrong values into the <code>calculate</code> function. Let’s go through a few pictures to understand what our code does.</p><h3 id="understanding-our-calculate-function">Understanding our calculate function</h3><p>First, let’s say a user clicks on a number, 99. At this point, nothing is registered in the calculator yet.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/0hH4Cz5kOEaDOcTQ2PMPmkDl26a8JHSXNrJ7.png" class="kg-image"></figure><!--kg-card-end: image--><p>Second, let’s say the user clicks the subtract operator. After they click the subtract operator, we set <code>firstValue</code> to 99. We set also <code>operator</code> to subtract.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/0K-KPTzdCBgfVvVaDNcVDYSjXfUO8p5LRs2v.png" class="kg-image"></figure><!--kg-card-end: image--><p>Third,
 let’s say the user clicks on a second value — this time, it’s 1. At 
this point, the displayed number gets updated to 1, but our <code>firstValue</code>, <code>operator</code> and <code>secondValue</code> remain unchanged.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/0MacG-A5Tl7rZeB6NLeNvghVyBpmSqaZQkn9.png" class="kg-image"></figure><!--kg-card-end: image--><p>Fourth, the user clicks on subtract again. Right after they click subtract, before we calculate the result, we set <code>secondValue</code> as the displayed number.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/RgDMKK92og4djxxmaYO1HUYiVoetKDK9x0j7.png" class="kg-image"></figure><!--kg-card-end: image--><p>Fifth, we perform the calculation with <code>firstValue</code> 99, <code>operator</code> subtract, and <code>secondValue</code> 1. The result is 98.</p><p>Once the result is calculated, we set the display to the result. Then, we set <code>operator</code> to subtract, and <code>firstValue</code> to the previous displayed number.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/X3VFJ5ar--k84pP3pM5VDVODvYlX4fCwHcnS.png" class="kg-image"></figure><!--kg-card-end: image--><p>Well, that’s terribly wrong! If we want to continue with the calculation, we need to update <code>firstValue</code> with the calculated value.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/gp-lkqhUOjoo46fIwx-7oLtbV7CP7jZwzc9y.png" class="kg-image"></figure><!--kg-card-end: image--><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> firstValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue
<span class="token keyword">const</span> operator <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator
<span class="token keyword">const</span> secondValue <span class="token operator">=</span> displayedNum

<span class="token keyword">if</span> <span class="token punctuation">(</span>
  firstValue <span class="token operator">&amp;&amp;</span>
  operator <span class="token operator">&amp;&amp;</span>
  previousKeyType <span class="token operator">!==</span> <span class="token string">'operator'</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> calcValue <span class="token operator">=</span> <span class="token function">calculate</span><span class="token punctuation">(</span>firstValue<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> secondValue<span class="token punctuation">)</span>
  display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> calcValue
  
<span class="token comment">// Update calculated value as firstValue</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue <span class="token operator">=</span> calcValue
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// If there are no calculations, set displayedNum as the firstValue</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue <span class="token operator">=</span> displayedNum
<span class="token punctuation">}</span>

key<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'is-depressed'</span><span class="token punctuation">)</span>
calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'operator'</span>
calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator <span class="token operator">=</span> action</code></pre><!--kg-card-end: code--><p>With this fix, consecutive calculations done by operator keys should now be correct.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/tKZ-VlIHo7dRNHDR2BBxZChE1cgqIuMU0Uh-.gif" class="kg-image"></figure><!--kg-card-end: image--><h3 id="what-happens-if-tim-hits-the-equals-key">What happens if Tim hits the equals key?</h3><p>First, nothing should happen if Tim hits the equals key before any operator keys.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/FBvnFZadNPXTllID0R7JfAkrsDb5SLcWTUhV.gif" class="kg-image"></figure><!--kg-card-end: image--><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/fKJV0ZqgVf-ppPqrx-70FpByKioVL2T9oAsF.gif" class="kg-image"></figure><!--kg-card-end: image--><p>We know that operator keys have not been clicked yet if <code>firstValue</code> is not set to a number. We can use this knowledge to prevent the equals from calculating.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> firstValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue
  <span class="token keyword">const</span> operator <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator
  <span class="token keyword">const</span> secondValue <span class="token operator">=</span> displayedNum
  
<span class="token keyword">if</span> <span class="token punctuation">(</span>firstValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token function">calculate</span><span class="token punctuation">(</span>firstValue<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> secondValue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'calculate'</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Second,
 if Tim hits a number, followed by an operator, followed by a equals, 
the calculator should calculate the result such that:</p><ol><li><code>2 + =</code> —&gt; <code>2 + 2 = 4</code></li><li><code>2 - =</code> —&gt; <code>2 - 2 = 0</code></li><li><code>2 × =</code> —&gt; <code>2 × 2 = 4</code></li><li><code>2 ÷ =</code> —&gt; <code>2 ÷ 2 = 1</code></li></ol><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/MUgIi0ck8OJRV18hfJ-kdn8k7Ydyy5mDvV6z.gif" class="kg-image"></figure><!--kg-card-end: image--><p>We have already taken this weird input into account. Can you understand why? :)</p><p>Third,
 if Tim hits the equals key after a calculation is completed, another 
calculation should be performed again. Here’s how the calculation should
 read:</p><ol><li>Tim hits keys 5–1</li><li>Tim hits equal. Calculated value is <code>5 - 1 = 4</code></li><li>Tim hits equal. Calculated value is <code>4 - 1 = 3</code></li><li>Tim hits equal. Calculated value is <code>3 - 1 = 2</code></li><li>Tim hits equal. Calculated value is <code>2 - 1 = 1</code></li><li>Tim hits equal. Calculated value is <code>1 - 1 = 0</code></li></ol><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/vB2oVoTXZsMABqV60qqclJhoOxYu2JeVhLx4.png" class="kg-image"></figure><!--kg-card-end: image--><p>Unfortunately, our calculator messes this calculation up. Here’s what our calculator shows:</p><ol><li>Tim hits key 5–1</li><li>Tim hits equal. Calculated value is <code>4</code></li><li>Tim hits equal. Calculated value is <code>1</code></li></ol><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/8roqRbhSH3hLVvtK7t-T2iRsRegqPWSrn4SF.gif" class="kg-image"></figure><!--kg-card-end: image--><h3 id="correcting-the-calculation">Correcting the calculation</h3><p>First, let’s say our user clicks 5. At this point, nothing is registered in the calculator yet.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/2vf5VGXNZ0vjGkyaY0y22PRTqqHDwgEKvCC3.png" class="kg-image"></figure><!--kg-card-end: image--><p>Second, let’s say the user clicks the subtract operator. After they click the subtract operator, we set <code>firstValue</code> to 5. We set also <code>operator</code> to subtract.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/Fc-QupYbv3HInXqv1vHFCc1avhDe3iyEErhs.png" class="kg-image"></figure><!--kg-card-end: image--><p>Third, the user clicks on a second value. Let’s say it’s 1. At this point, the displayed number gets updated to 1, but our <code>firstValue</code>, <code>operator</code> and <code>secondValue</code> remain unchanged.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/lW3CtoXJ1gxpUS5SZM3zh3zmqSB-ksM6E0vr.png" class="kg-image"></figure><!--kg-card-end: image--><p>Fourth, the user clicks the equals key. Right after they click equals, but before the calculation, we set <code>secondValue</code> as <code>displayedNum</code></p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/yeQCYcu0ecbNbJlHa9aqEZopHj-FyTqXuRmw.png" class="kg-image"></figure><!--kg-card-end: image--><p>Fifth, the calculator calculates the result of <code>5 - 1</code> and gives <code>4</code>. The result gets updated to the display. <code>firstValue</code> and <code>operator</code> get carried forward to the next calculation since we did not update them.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/YOsfq7AWCs0YbABkiebax-oaQVGc5tWsNyXJ.png" class="kg-image"></figure><!--kg-card-end: image--><p>Sixth, when the user hits equals again, we set <code>secondValue</code> to <code>displayedNum</code> before the calculation.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/BF7tBEUHJN4gnIwQqUTq9ctHIUIVcYM026Ro.png" class="kg-image"></figure><!--kg-card-end: image--><p>You can tell what’s wrong here.</p><p>Instead of <code>secondValue</code>, we want the set <code>firstValue</code> to the displayed number.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> firstValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue
  <span class="token keyword">const</span> operator <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator
  <span class="token keyword">const</span> secondValue <span class="token operator">=</span> displayedNum
  
<span class="token keyword">if</span> <span class="token punctuation">(</span>firstValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>previousKeyType <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      firstValue <span class="token operator">=</span> displayedNum
    <span class="token punctuation">}</span>
    
display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token function">calculate</span><span class="token punctuation">(</span>firstValue<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> secondValue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'calculate'</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>We also want to carry forward the previous <code>secondValue</code> into the new calculation. For <code>secondValue</code> to persist to the next calculation, we need to store it in another custom attribute. Let’s call this custom attribute <code>modValue</code> (stands for modifier value).</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> firstValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue
  <span class="token keyword">const</span> operator <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator
  <span class="token keyword">const</span> secondValue <span class="token operator">=</span> displayedNum
  
<span class="token keyword">if</span> <span class="token punctuation">(</span>firstValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>previousKeyType <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      firstValue <span class="token operator">=</span> displayedNum
    <span class="token punctuation">}</span>
    
display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token function">calculate</span><span class="token punctuation">(</span>firstValue<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> secondValue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
<span class="token comment">// Set modValue attribute</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>modValue <span class="token operator">=</span> secondValue
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'calculate'</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>If the <code>previousKeyType</code> is <code>calculate</code>, we know we can use <code>calculator.dataset.modValue</code> as <code>secondValue</code>. Once we know this, we can perform the calculation.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>firstValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>previousKeyType <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    firstValue <span class="token operator">=</span> displayedNum
    secondValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>modValue
  <span class="token punctuation">}</span>
  
display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token function">calculate</span><span class="token punctuation">(</span>firstValue<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> secondValue<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>With that, we have the correct calculation when the equals key is clicked consecutively.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/sjYX-ImohfhbFFbw1-FqmKagBvfFQKm0PzAu.gif" class="kg-image"></figure><!--kg-card-end: image--><h3 id="back-to-the-equals-key">Back to the equals key</h3><p>Fourth, if Tim hits a decimal key or a number key after the calculator key, the display should be replaced with <code>0.</code> or the new number respectively.</p><p>Here, instead of just checking if the <code>previousKeyType</code> is <code>operator</code>, we also need to check if it’s <code>calculate</code>.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    displayedNum <span class="token operator">===</span> <span class="token string">'0'</span> <span class="token operator">||</span>
    previousKeyType <span class="token operator">===</span> <span class="token string">'operator'</span> <span class="token operator">||</span>
    previousKeyType <span class="token operator">===</span> <span class="token string">'calculate'</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> keyContent
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> displayedNum <span class="token operator">+</span> keyContent
  <span class="token punctuation">}</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'number'</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'decimal'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>displayedNum<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> displayedNum <span class="token operator">+</span> <span class="token string">'.'</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>
    previousKeyType <span class="token operator">===</span> <span class="token string">'operator'</span> <span class="token operator">||</span>
    previousKeyType <span class="token operator">===</span> <span class="token string">'calculate'</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'0.'</span>
  <span class="token punctuation">}</span>
  
calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'decimal'</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Fifth, if Tim hits an operator key right after the equals key, the calculator should <strong>not</strong> calculate.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/uuifuJ41Oo86NXMsPj44RSQf7ExULROc2GaI.gif" class="kg-image"></figure><!--kg-card-end: image--><p>To do this, we check if the <code>previousKeyType</code> is <code>calculate</code> before performing calculations with operator keys.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>
  action <span class="token operator">===</span> <span class="token string">'add'</span> <span class="token operator">||</span>
  action <span class="token operator">===</span> <span class="token string">'subtract'</span> <span class="token operator">||</span>
  action <span class="token operator">===</span> <span class="token string">'multiply'</span> <span class="token operator">||</span>
  action <span class="token operator">===</span> <span class="token string">'divide'</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  
<span class="token keyword">if</span> <span class="token punctuation">(</span>
    firstValue <span class="token operator">&amp;&amp;</span>
    operator <span class="token operator">&amp;&amp;</span>
    previousKeyType <span class="token operator">!==</span> <span class="token string">'operator'</span> <span class="token operator">&amp;&amp;</span>
    previousKeyType <span class="token operator">!==</span> <span class="token string">'calculate'</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> calcValue <span class="token operator">=</span> <span class="token function">calculate</span><span class="token punctuation">(</span>firstValue<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> secondValue<span class="token punctuation">)</span>
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> calcValue
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue <span class="token operator">=</span> calcValue
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue <span class="token operator">=</span> displayedNum
  <span class="token punctuation">}</span>
  
<span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>The clear key has two uses:</p><ol><li>All Clear (denoted by <code>AC</code>) clears everything and resets the calculator to its initial state.</li><li>Clear entry (denoted by <code>CE</code>) clears the current entry. It keeps previous numbers in memory.</li></ol><p>When the calculator is in its default state, <code>AC</code> should be shown.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/22fj2VLJJ1SPexybqdWIqPRkj9JkrlI3AAYl.png" class="kg-image"></figure><!--kg-card-end: image--><p>First, if Tim hits a key (any key except clear), <code>AC</code> should be changed to <code>CE</code>.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/Hs9tjp3JQIYOaAgh8KDnxj5QShScU0nMkDa7.gif" class="kg-image"></figure><!--kg-card-end: image--><p>We do this by checking if the <code>data-action</code> is <code>clear</code>. If it’s not <code>clear</code>, we look for the clear button and change its <code>textContent</code>.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">!==</span> <span class="token string">'clear'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> clearButton <span class="token operator">=</span> calculator<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'[data-action=clear]'</span><span class="token punctuation">)</span>
  clearButton<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'CE'</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Second, if Tim hits <code>CE</code>, the display should read 0. At the same time, <code>CE</code> should be reverted to <code>AC</code> so Tim can reset the calculator to its initial state.**</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/Dv6SFw5LY8wB0WqTFQBe46-QoraBiq8TvpdY.gif" class="kg-image"></figure><!--kg-card-end: image--><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'clear'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token number">0</span>
  key<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'AC'</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'clear'</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Third, if Tim hits <code>AC</code>, reset the calculator to its initial state.</p><p>To reset the calculator to its initial state, we need to clear all custom attributes we’ve set.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'clear'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span>textContent <span class="token operator">===</span> <span class="token string">'AC'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue <span class="token operator">=</span> <span class="token string">''</span>
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>modValue <span class="token operator">=</span> <span class="token string">''</span>
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator <span class="token operator">=</span> <span class="token string">''</span>
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">''</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    key<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'AC'</span>
  <span class="token punctuation">}</span>
  
display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token number">0</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'clear'</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>That’s it — for the edge cases portion, anyway!</p><p>You can grab the source code for the edge cases part through <a href="http://calculator-part-2/" rel="noopener">this link</a> (scroll down and enter your email address in the box, and I’ll send the source codes right to your mailbox).</p><p>At
 this point, the code we created together is quite confusing. You’ll 
probably get lost if you try to read the code on your own. Let’s 
refactor it to make it cleaner.</p><h3 id="refactoring-the-code">Refactoring the code</h3><p>When you refactor, you’ll often start with the most obvious improvements. In this case, let’s start with <code>calculate</code>.</p><p>Before continuing on, make sure you know these JavaScript practices/features. We’ll use them in the refactor.</p><ol><li><a href="http://blog.timoxley.com/post/47041269194/avoid-else-return-early" rel="noopener">Early returns</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator" rel="noopener">Ternary operators</a></li><li><a href="https://medium.com/@jamesjefferyuk/javascript-what-are-pure-functions-4d4d5392d49c" rel="noopener">Pure functions</a></li><li><a href="https://zellwk.com/blog/es6#destructuring" rel="noopener">ES6 Destructuring</a></li></ol><p>With that, let’s begin!</p><h3 id="refactoring-the-calculate-function">Refactoring the calculate function</h3><p>Here’s what we have so far.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">calculate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">n1<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> n2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token string">''</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'add'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> firstNum <span class="token operator">+</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'subtract'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'multiply'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'divide'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>You
 learned that we should reduce reassignments as much as possible. Here, 
we can remove assignments if we return the result of the calculation 
within the <code>if</code> and <code>else if</code> statements:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">calculate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">n1<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> n2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'add'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> firstNum <span class="token operator">+</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'subtract'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'multiply'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'divide'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Since we return all values, we can use <strong>early returns</strong>. If we do so, there’s no need for any <code>else if</code> conditions.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">calculate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">n1<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> n2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'add'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> firstNum <span class="token operator">+</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'subtract'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'multiply'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'divide'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>And since we have one statement per <code>if</code>
 condition, we can remove the brackets. (Note: some developers swear by 
curly brackets, though). Here's what the code would look like:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">calculate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">n1<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> n2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'add'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'subtract'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'multiply'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'divide'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Finally, we called <code>parseFloat</code> eight times in the function. We can simplify it by creating two variables to contain float values:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">calculate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">n1<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> n2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> firstNum <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span>
  <span class="token keyword">const</span> secondNum <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'add'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> firstNum <span class="token operator">+</span> secondNum
  <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'subtract'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> firstNum <span class="token operator">-</span> secondNum
  <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'multiply'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> firstNum <span class="token operator">*</span> secondNum
  <span class="token keyword">if</span> <span class="token punctuation">(</span>operator <span class="token operator">===</span> <span class="token string">'divide'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> firstNum <span class="token operator">/</span> secondNum
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>We’re done with <code>calculate</code> now. Don't you think it's easier to read compared to before?</p><h3 id="refactoring-the-event-listener">Refactoring the event listener</h3><p>The code we created for the event listener is huge. Here’s what we have at the moment:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js">keys<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'add'</span> <span class="token operator">||</span>
      action <span class="token operator">===</span> <span class="token string">'subtract'</span> <span class="token operator">||</span>
      action <span class="token operator">===</span> <span class="token string">'multiply'</span> <span class="token operator">||</span>
      action <span class="token operator">===</span> <span class="token string">'divide'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">/* ... */</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'clear'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">!==</span> <span class="token string">'clear'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><!--kg-card-end: code--><p>How
 do you begin refactoring this piece of code? If you don’t know any 
programming best practices, you may be tempted to refactor by splitting 
up each kind of action into a smaller function:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token comment">// Don't do this!</span>
<span class="token keyword">const</span> handleNumberKeys <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> handleOperatorKeys <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> handleDecimalKey <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> handleClearKey <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> handleCalculateKey <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Don’t
 do this. It doesn’t help, because you’re merely splitting up blocks of 
code. When you do so, the function gets harder to read.</p><p>A better way is to split the code into pure and impure functions. If you do so, you’ll get code that looks like this:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js">keys<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Pure function</span>
  <span class="token keyword">const</span> resultString <span class="token operator">=</span> <span class="token function">createResultString</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span>
  
  <span class="token comment">// Impure stuff</span>
  display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> resultString
  <span class="token function">updateCalculatorState</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><!--kg-card-end: code--><p>Here, <code>createResultString</code> is a pure function that returns what needs to be displayed on the calculator. <code>updateCalculatorState</code> is an impure function that changes the calculator's visual appearance and custom attributes.</p><h3 id="making-createresultstring">Making createResultString</h3><p>As mentioned before, <code>createResultString</code> should return the value that needs to be displayed on the calculator.<br>You can get these values through parts of the code that says <code>display.textContent = 'some value</code>.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js">display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'some value'</span></code></pre><!--kg-card-end: code--><p>Instead of <code>display.textContent = 'some value'</code>, we want to return each value so we can use it later.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token comment">// replace the above with this</span>
<span class="token keyword">return</span> <span class="token string">'some value'</span></code></pre><!--kg-card-end: code--><p>Let’s go through this together, step by step, starting with number keys.</p><h3 id="making-the-result-string-for-number-keys">Making the result string for number keys</h3><p>Here’s the code we have for number keys:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    displayedNum <span class="token operator">===</span> <span class="token string">'0'</span> <span class="token operator">||</span>
    previousKeyType <span class="token operator">===</span> <span class="token string">'operator'</span> <span class="token operator">||</span>
    previousKeyType <span class="token operator">===</span> <span class="token string">'calculate'</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> keyContent
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> displayedNum <span class="token operator">+</span> keyContent
  <span class="token punctuation">}</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'number'</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>The first step is to copy parts that say <code>display.textContent = 'some value'</code> into <code>createResultString</code>. When you do this, make sure you change <code>display.textContent =</code> into <code>return</code>.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">createResultString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      displayedNum <span class="token operator">===</span> <span class="token string">'0'</span> <span class="token operator">||</span>
      previousKeyType <span class="token operator">===</span> <span class="token string">'operator'</span> <span class="token operator">||</span>
      previousKeyType <span class="token operator">===</span> <span class="token string">'calculate'</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> keyContent
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> displayedNum <span class="token operator">+</span> keyContent
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Next, we can convert the <code>if/else</code> statement to a ternary operator:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">createResultString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> displayedNum <span class="token operator">===</span> <span class="token string">'0'</span> <span class="token operator">||</span>
      previousKeyType <span class="token operator">===</span> <span class="token string">'operator'</span> <span class="token operator">||</span>
      previousKeyType <span class="token operator">===</span> <span class="token string">'calculate'</span>
      <span class="token operator">?</span> keyContent
      <span class="token punctuation">:</span> displayedNum <span class="token operator">+</span> keyContent
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>When you refactor, remember to note down a list of variables you need. We’ll come back to the list later.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">createResultString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Variables required are:</span>
  <span class="token comment">// 1. keyContent</span>
  <span class="token comment">// 2. displayedNum</span>
  <span class="token comment">// 3. previousKeyType</span>
  <span class="token comment">// 4. action</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> displayedNum <span class="token operator">===</span> <span class="token string">'0'</span> <span class="token operator">||</span>
      previousKeyType <span class="token operator">===</span> <span class="token string">'operator'</span> <span class="token operator">||</span>
      previousKeyType <span class="token operator">===</span> <span class="token string">'calculate'</span>
      <span class="token operator">?</span> keyContent
      <span class="token punctuation">:</span> displayedNum <span class="token operator">+</span> keyContent
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><h3 id="making-the-result-string-for-the-decimal-key">Making the result string for the decimal key</h3><p>Here’s the code we have for the decimal key:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'decimal'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>displayedNum<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> displayedNum <span class="token operator">+</span> <span class="token string">'.'</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>
    previousKeyType <span class="token operator">===</span> <span class="token string">'operator'</span> <span class="token operator">||</span>
    previousKeyType <span class="token operator">===</span> <span class="token string">'calculate'</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'0.'</span>
  <span class="token punctuation">}</span>
  
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'decimal'</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>As before, we want to move anything that changes <code>display.textContent</code>into <code>createResultString</code>.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">createResultString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'decimal'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>displayedNum<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">=</span> displayedNum <span class="token operator">+</span> <span class="token string">'.'</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>previousKeyType <span class="token operator">===</span> <span class="token string">'operator'</span> <span class="token operator">||</span> previousKeyType <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">=</span> <span class="token string">'0.'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Since we want to return all values, we can convert <code>else if</code> statements into early returns.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">createResultString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'decimal'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>displayedNum<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> displayedNum <span class="token operator">+</span> <span class="token string">'.'</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>previousKeyType <span class="token operator">===</span> <span class="token string">'operator'</span> <span class="token operator">||</span> previousKeyType <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'0.'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>A
 common mistake here is to forget to return the currently displayed 
number when neither condition is matched. We need this because we will 
replace the <code>display.textContent</code> with the value returned from <code>createResultString</code>. If we missed it, <code>createResultString</code> will return <code>undefined</code>, which is not what we desire.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">createResultString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'decimal'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>displayedNum<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> displayedNum <span class="token operator">+</span> <span class="token string">'.'</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>previousKeyType <span class="token operator">===</span> <span class="token string">'operator'</span> <span class="token operator">||</span> previousKeyType <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'0.'</span>
    <span class="token keyword">return</span> displayedNum
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>As always, take note of the variables that are required. At this point, the required variables remain the same as before:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">createResultString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Variables required are:</span>
  <span class="token comment">// 1. keyContent</span>
  <span class="token comment">// 2. displayedNum</span>
  <span class="token comment">// 3. previousKeyType</span>
  <span class="token comment">// 4. action</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><h3 id="making-the-result-string-for-operator-keys">Making the result string for operator keys</h3><p>Here’s the code we wrote for operator keys.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>
  action <span class="token operator">===</span> <span class="token string">'add'</span> <span class="token operator">||</span>
  action <span class="token operator">===</span> <span class="token string">'subtract'</span> <span class="token operator">||</span>
  action <span class="token operator">===</span> <span class="token string">'multiply'</span> <span class="token operator">||</span>
  action <span class="token operator">===</span> <span class="token string">'divide'</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> firstValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue
  <span class="token keyword">const</span> operator <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator
  <span class="token keyword">const</span> secondValue <span class="token operator">=</span> displayedNum
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    firstValue <span class="token operator">&amp;&amp;</span>
    operator <span class="token operator">&amp;&amp;</span>
    previousKeyType <span class="token operator">!==</span> <span class="token string">'operator'</span> <span class="token operator">&amp;&amp;</span>
    previousKeyType <span class="token operator">!==</span> <span class="token string">'calculate'</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> calcValue <span class="token operator">=</span> <span class="token function">calculate</span><span class="token punctuation">(</span>firstValue<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> secondValue<span class="token punctuation">)</span>
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> calcValue
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue <span class="token operator">=</span> calcValue
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue <span class="token operator">=</span> displayedNum
  <span class="token punctuation">}</span>
  
  key<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'is-depressed'</span><span class="token punctuation">)</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'operator'</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator <span class="token operator">=</span> action
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>You know the drill by now: we want to move everything that changes <code>display.textContent</code> into <code>createResultString</code>. Here's what needs to be moved:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">createResultString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    action <span class="token operator">===</span> <span class="token string">'add'</span> <span class="token operator">||</span>
    action <span class="token operator">===</span> <span class="token string">'subtract'</span> <span class="token operator">||</span>
    action <span class="token operator">===</span> <span class="token string">'multiply'</span> <span class="token operator">||</span>
    action <span class="token operator">===</span> <span class="token string">'divide'</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> firstValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue
    <span class="token keyword">const</span> operator <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator
    <span class="token keyword">const</span> secondValue <span class="token operator">=</span> displayedNum
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      firstValue <span class="token operator">&amp;&amp;</span>
      operator <span class="token operator">&amp;&amp;</span>
      previousKeyType <span class="token operator">!==</span> <span class="token string">'operator'</span> <span class="token operator">&amp;&amp;</span>
      previousKeyType <span class="token operator">!==</span> <span class="token string">'calculate'</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">calculate</span><span class="token punctuation">(</span>firstValue<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> secondValue<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Remember, <code>createResultString</code> needs to return the value to be displayed on the calculator. If the <code>if</code> condition did not match, we still want to return the displayed number.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">createResultString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    action <span class="token operator">===</span> <span class="token string">'add'</span> <span class="token operator">||</span>
    action <span class="token operator">===</span> <span class="token string">'subtract'</span> <span class="token operator">||</span>
    action <span class="token operator">===</span> <span class="token string">'multiply'</span> <span class="token operator">||</span>
    action <span class="token operator">===</span> <span class="token string">'divide'</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> firstValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue
    <span class="token keyword">const</span> operator <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator
    <span class="token keyword">const</span> secondValue <span class="token operator">=</span> displayedNum
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      firstValue <span class="token operator">&amp;&amp;</span>
      operator <span class="token operator">&amp;&amp;</span>
      previousKeyType <span class="token operator">!==</span> <span class="token string">'operator'</span> <span class="token operator">&amp;&amp;</span>
      previousKeyType <span class="token operator">!==</span> <span class="token string">'calculate'</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">calculate</span><span class="token punctuation">(</span>firstValue<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> secondValue<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> displayedNum
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>We can then refactor the <code>if/else</code> statement into a ternary operator:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">createResultString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    action <span class="token operator">===</span> <span class="token string">'add'</span> <span class="token operator">||</span>
    action <span class="token operator">===</span> <span class="token string">'subtract'</span> <span class="token operator">||</span>
    action <span class="token operator">===</span> <span class="token string">'multiply'</span> <span class="token operator">||</span>
    action <span class="token operator">===</span> <span class="token string">'divide'</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> firstValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue
    <span class="token keyword">const</span> operator <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator
    <span class="token keyword">const</span> secondValue <span class="token operator">=</span> displayedNum
    
    <span class="token keyword">return</span> firstValue <span class="token operator">&amp;&amp;</span>
      operator <span class="token operator">&amp;&amp;</span>
      previousKeyType <span class="token operator">!==</span> <span class="token string">'operator'</span> <span class="token operator">&amp;&amp;</span>
      previousKeyType <span class="token operator">!==</span> <span class="token string">'calculate'</span>
      <span class="token operator">?</span> <span class="token function">calculate</span><span class="token punctuation">(</span>firstValue<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> secondValue<span class="token punctuation">)</span>
      <span class="token punctuation">:</span> displayedNum
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>If you look closely, you’ll realize that there’s no need to store a <code>secondValue</code>variable. We can use <code>displayedNum</code> directly in the <code>calculate</code> function.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">createResultString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    action <span class="token operator">===</span> <span class="token string">'add'</span> <span class="token operator">||</span>
    action <span class="token operator">===</span> <span class="token string">'subtract'</span> <span class="token operator">||</span>
    action <span class="token operator">===</span> <span class="token string">'multiply'</span> <span class="token operator">||</span>
    action <span class="token operator">===</span> <span class="token string">'divide'</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> firstValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue
    <span class="token keyword">const</span> operator <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator
    
    <span class="token keyword">return</span> firstValue <span class="token operator">&amp;&amp;</span>
      operator <span class="token operator">&amp;&amp;</span>
      previousKeyType <span class="token operator">!==</span> <span class="token string">'operator'</span> <span class="token operator">&amp;&amp;</span>
      previousKeyType <span class="token operator">!==</span> <span class="token string">'calculate'</span>
      <span class="token operator">?</span> <span class="token function">calculate</span><span class="token punctuation">(</span>firstValue<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> displayedNum<span class="token punctuation">)</span>
      <span class="token punctuation">:</span> displayedNum
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Finally, take note of the variables and properties required. This time, we need <code>calculator.dataset.firstValue</code> and <code>calculator.dataset.operator</code>.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">createResultString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Variables &amp; properties required are:</span>
  <span class="token comment">// 1. keyContent</span>
  <span class="token comment">// 2. displayedNum</span>
  <span class="token comment">// 3. previousKeyType</span>
  <span class="token comment">// 4. action</span>
  <span class="token comment">// 5. calculator.dataset.firstValue</span>
  <span class="token comment">// 6. calculator.dataset.operator</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><h3 id="making-the-result-string-for-the-clear-key">Making the result string for the clear key</h3><p>We wrote the following code to handle the <code>clear</code> key.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'clear'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span>textContent <span class="token operator">===</span> <span class="token string">'AC'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue <span class="token operator">=</span> <span class="token string">''</span>
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>modValue <span class="token operator">=</span> <span class="token string">''</span>
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator <span class="token operator">=</span> <span class="token string">''</span>
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">''</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    key<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'AC'</span>
  <span class="token punctuation">}</span>
  
  display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token number">0</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'clear'</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>As above, want to move everything that changes <code>display.textContent</code>into <code>createResultString</code>.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">createResultString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'clear'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><h3 id="making-the-result-string-for-the-equals-key">Making the result string for the equals key</h3><p>Here’s the code we wrote for the equals key:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> firstValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue
  <span class="token keyword">const</span> operator <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator
  <span class="token keyword">let</span> secondValue <span class="token operator">=</span> displayedNum
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>firstValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>previousKeyType <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      firstValue <span class="token operator">=</span> displayedNum
      secondValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>modValue
    <span class="token punctuation">}</span>
    
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token function">calculate</span><span class="token punctuation">(</span>firstValue<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> secondValue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>modValue <span class="token operator">=</span> secondValue
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'calculate'</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>As above, we want to copy everything that changes <code>display.textContent</code>into <code>createResultString</code>. Here's what needs to be copied:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> firstValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue
  <span class="token keyword">const</span> operator <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator
  <span class="token keyword">let</span> secondValue <span class="token operator">=</span> displayedNum
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>firstValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>previousKeyType <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      firstValue <span class="token operator">=</span> displayedNum
      secondValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>modValue
    <span class="token punctuation">}</span>
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token function">calculate</span><span class="token punctuation">(</span>firstValue<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> secondValue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>When copying the code into <code>createResultString</code>, make sure you return values for every possible scenario:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">createResultString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> firstValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue
    <span class="token keyword">const</span> operator <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator
    <span class="token keyword">let</span> secondValue <span class="token operator">=</span> displayedNum
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>firstValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>previousKeyType <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        firstValue <span class="token operator">=</span> displayedNum
        secondValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>modValue
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token function">calculate</span><span class="token punctuation">(</span>firstValue<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> secondValue<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> displayedNum
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Next, we want to reduce reassignments. We can do so by passing in the correct values into <code>calculate</code> through a ternary operator.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">createResultString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> firstValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue
    <span class="token keyword">const</span> operator <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator
    <span class="token keyword">const</span> modValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>modValue
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>firstValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> previousKeyType <span class="token operator">===</span> <span class="token string">'calculate'</span>
        <span class="token operator">?</span> <span class="token function">calculate</span><span class="token punctuation">(</span>displayedNum<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> modValue<span class="token punctuation">)</span>
        <span class="token punctuation">:</span> <span class="token function">calculate</span><span class="token punctuation">(</span>firstValue<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> displayedNum<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> displayedNum
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>You can further simplify the above code with another ternary operator if you feel comfortable with it:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">createResultString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> firstValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue
    <span class="token keyword">const</span> operator <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator
    <span class="token keyword">const</span> modValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>modValue
    
    <span class="token keyword">return</span> firstValue
      <span class="token operator">?</span> previousKeyType <span class="token operator">===</span> <span class="token string">'calculate'</span>
        <span class="token operator">?</span> <span class="token function">calculate</span><span class="token punctuation">(</span>displayedNum<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> modValue<span class="token punctuation">)</span>
        <span class="token punctuation">:</span> <span class="token function">calculate</span><span class="token punctuation">(</span>firstValue<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> displayedNum<span class="token punctuation">)</span>
      <span class="token punctuation">:</span> displayedNum
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>At this point, we want to take note of the properties and variables required again:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">createResultString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Variables &amp; properties required are:</span>
  <span class="token comment">// 1. keyContent</span>
  <span class="token comment">// 2. displayedNum</span>
  <span class="token comment">// 3. previousKeyType</span>
  <span class="token comment">// 4. action</span>
  <span class="token comment">// 5. calculator.dataset.firstValue</span>
  <span class="token comment">// 6. calculator.dataset.operator</span>
  <span class="token comment">// 7. calculator.dataset.modValue</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><h3 id="passing-in-necessary-variables">Passing in necessary variables</h3><p>We need seven properties/variables in <code>createResultString</code>:</p><ol><li><code>keyContent</code></li><li><code>displayedNum</code></li><li><code>previousKeyType</code></li><li><code>action</code></li><li><code>firstValue</code></li><li><code>modValue</code></li><li><code>operator</code></li></ol><p>We can get <code>keyContent</code> and <code>action</code> from <code>key</code>. We can also get <code>firstValue</code>, <code>modValue</code>, <code>operator</code> and <code>previousKeyType</code> from <code>calculator.dataset</code>.</p><p>That means the <code>createResultString</code> function needs three variables—<code>key</code>, <code>displayedNum</code> and <code>calculator.dataset</code>. Since <code>calculator.dataset</code>represents the state of the calculator, let's use a variable called <code>state</code>instead.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">createResultString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> displayedNum<span class="token punctuation">,</span> state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> keyContent <span class="token operator">=</span> key<span class="token punctuation">.</span>textContent
  <span class="token keyword">const</span> action <span class="token operator">=</span> key<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>action
  <span class="token keyword">const</span> firstValue <span class="token operator">=</span> state<span class="token punctuation">.</span>firstValue
  <span class="token keyword">const</span> modValue <span class="token operator">=</span> state<span class="token punctuation">.</span>modValue
  <span class="token keyword">const</span> operator <span class="token operator">=</span> state<span class="token punctuation">.</span>operator
  <span class="token keyword">const</span> previousKeyType <span class="token operator">=</span> state<span class="token punctuation">.</span>previousKeyType
  <span class="token comment">// ... Refactor as necessary</span>
<span class="token punctuation">}</span>

<span class="token comment">// Using createResultString</span>
keys<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
  <span class="token keyword">const</span> displayedNum <span class="token operator">=</span> display<span class="token punctuation">.</span>textContent
  <span class="token keyword">const</span> resultString <span class="token operator">=</span> <span class="token function">createResultString</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">,</span> displayedNum<span class="token punctuation">,</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">)</span>
  
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><!--kg-card-end: code--><p>Feel free to destructure variables if you desire:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">createResultString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> displayedNum<span class="token punctuation">,</span> state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> keyContent <span class="token operator">=</span> key<span class="token punctuation">.</span>textContent
  <span class="token keyword">const</span> <span class="token punctuation">{</span> action <span class="token punctuation">}</span> <span class="token operator">=</span> key<span class="token punctuation">.</span>dataset
  <span class="token keyword">const</span> <span class="token punctuation">{</span>
    firstValue<span class="token punctuation">,</span>
    modValue<span class="token punctuation">,</span>
    operator<span class="token punctuation">,</span>
    previousKeyType
  <span class="token punctuation">}</span> <span class="token operator">=</span> state
  
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><h3 id="consistency-within-if-statements">Consistency within if statements</h3><p>In <code>createResultString</code>, we used the following conditions to test for the type of keys that were clicked:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token comment">// If key is number</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>

<span class="token comment">// If key is decimal</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'decimal'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>

<span class="token comment">// If key is operator</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>
  action <span class="token operator">===</span> <span class="token string">'add'</span> <span class="token operator">||</span>
  action <span class="token operator">===</span> <span class="token string">'subtract'</span> <span class="token operator">||</span>
  action <span class="token operator">===</span> <span class="token string">'multiply'</span> <span class="token operator">||</span>
  action <span class="token operator">===</span> <span class="token string">'divide'</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span><span class="token punctuation">}</span>

<span class="token comment">// If key is clear</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'clear'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>

<span class="token comment">// If key is calculate</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>They’re
 not consistent, so they’re hard to read. If possible, we want to make 
them consistent so we can write something like this:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'decimal'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'operator'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span><span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'clear'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>To do so, we can create a function called <code>getKeyType</code>. This function should return the type of key that was clicked.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">getKeyType</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> action <span class="token punctuation">}</span> <span class="token operator">=</span> key<span class="token punctuation">.</span>dataset
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>action<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'number'</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    action <span class="token operator">===</span> <span class="token string">'add'</span> <span class="token operator">||</span>
    action <span class="token operator">===</span> <span class="token string">'subtract'</span> <span class="token operator">||</span>
    action <span class="token operator">===</span> <span class="token string">'multiply'</span> <span class="token operator">||</span>
    action <span class="token operator">===</span> <span class="token string">'divide'</span>
  <span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'operator'</span>
  <span class="token comment">// For everything else, return the action</span>
  <span class="token keyword">return</span> action
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Here’s how you’d use the function:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">createResultString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> displayedNum<span class="token punctuation">,</span> state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> keyType <span class="token operator">=</span> <span class="token function">getKeyType</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'decimal'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'operator'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span><span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'clear'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>We’re done with <code>createResultString</code>. Let's move on to <code>updateCalculatorState</code>.</p><h3 id="making-updatecalculatorstate">Making updateCalculatorState</h3><p><code>updateCalculatorState</code> is a function that changes the calculator's visual appearance and custom attributes.</p><p>As with <code>createResultString</code>, we need to check the type of key that was clicked. Here, we can reuse <code>getKeyType</code>.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">updateCalculatorState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> keyType <span class="token operator">=</span> <span class="token function">getKeyType</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'decimal'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'operator'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span><span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'clear'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>If you look at the leftover code, you may notice we change <code>data-previous-key-type</code> for every type of key. Here's what the code looks like:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">updateCalculatorState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> calculator</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> keyType <span class="token operator">=</span> <span class="token function">getKeyType</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'number'</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'decimal'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'decimal'</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    action <span class="token operator">===</span> <span class="token string">'add'</span> <span class="token operator">||</span>
    action <span class="token operator">===</span> <span class="token string">'subtract'</span> <span class="token operator">||</span>
    action <span class="token operator">===</span> <span class="token string">'multiply'</span> <span class="token operator">||</span>
    action <span class="token operator">===</span> <span class="token string">'divide'</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'operator'</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'clear'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'clear'</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'calculate'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>This is redundant because we already know the key type with <code>getKeyType</code>. We can refactor the above to:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">updateCalculatorState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> calculator</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> keyType <span class="token operator">=</span> <span class="token function">getKeyType</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> keyType
    
  <span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'decimal'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'operator'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span><span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'clear'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><h3 id="making-updatecalculatorstate-for-operator-keys">Making <code>updateCalculatorState</code> for operator keys</h3><p>Visually, we need to make sure all keys release their depressed state. Here, we can copy and paste the code we had before:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">updateCalculatorState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> calculator</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> keyType <span class="token operator">=</span> <span class="token function">getKeyType</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> keyType
  
  Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">k</span> <span class="token operator">=&gt;</span> k<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'is-depressed'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Here’s what’s left from what we’ve written for operator keys, after moving pieces related to <code>display.textContent</code> into <code>createResultString</code>.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'operator'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>firstValue <span class="token operator">&amp;&amp;</span>
      operator <span class="token operator">&amp;&amp;</span>
      previousKeyType <span class="token operator">!==</span> <span class="token string">'operator'</span> <span class="token operator">&amp;&amp;</span>
      previousKeyType <span class="token operator">!==</span> <span class="token string">'calculate'</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue <span class="token operator">=</span> calculatedValue
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue <span class="token operator">=</span> displayedNum
  <span class="token punctuation">}</span>
  
  key<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'is-depressed'</span><span class="token punctuation">)</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator <span class="token operator">=</span> key<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>action
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>You may notice that we can shorten the code with a ternary operator:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'operator'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  key<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'is-depressed'</span><span class="token punctuation">)</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator <span class="token operator">=</span> key<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>action
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue <span class="token operator">=</span> firstValue <span class="token operator">&amp;&amp;</span>
    operator <span class="token operator">&amp;&amp;</span>
    previousKeyType <span class="token operator">!==</span> <span class="token string">'operator'</span> <span class="token operator">&amp;&amp;</span>
    previousKeyType <span class="token operator">!==</span> <span class="token string">'calculate'</span>
    <span class="token operator">?</span> calculatedValue
    <span class="token punctuation">:</span> displayedNum
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>As before, take note of the variables and properties you need. Here, we need <code>calculatedValue</code> and <code>displayedNum</code>.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">updateCalculatorState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> calculator</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Variables and properties needed</span>
  <span class="token comment">// 1. key</span>
  <span class="token comment">// 2. calculator</span>
  <span class="token comment">// 3. calculatedValue</span>
  <span class="token comment">// 4. displayedNum</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><h3 id="making-updatecalculatorstate-for-the-clear-key">Making <code>updateCalculatorState</code> for the clear key</h3><p>Here’s the leftover code for the clear key:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'clear'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span>textContent <span class="token operator">===</span> <span class="token string">'AC'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue <span class="token operator">=</span> <span class="token string">''</span>
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>modValue <span class="token operator">=</span> <span class="token string">''</span>
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator <span class="token operator">=</span> <span class="token string">''</span>
    calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">''</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    key<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'AC'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">!==</span> <span class="token string">'clear'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> clearButton <span class="token operator">=</span> calculator<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'[data-action=clear]'</span><span class="token punctuation">)</span>
  clearButton<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'CE'</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>There’s nothing much we can refactor here. Feel free to copy/paste everything into <code>updateCalculatorState</code>.</p><h3 id="making-updatecalculatorstate-for-the-equals-key">Making <code>updateCalculatorState</code> for the equals key</h3><p>Here’s the code we wrote for the equals key:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> firstValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>firstValue
  <span class="token keyword">const</span> operator <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>operator
  <span class="token keyword">let</span> secondValue <span class="token operator">=</span> displayedNum
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>firstValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>previousKeyType <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      firstValue <span class="token operator">=</span> displayedNum
      secondValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>modValue
    <span class="token punctuation">}</span>
    
    display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token function">calculate</span><span class="token punctuation">(</span>firstValue<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> secondValue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>modValue <span class="token operator">=</span> secondValue
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>previousKeyType <span class="token operator">=</span> <span class="token string">'calculate'</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>Here’s what we’re left with if we remove everything that concerns <code>display.textContent</code>.</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> secondValue <span class="token operator">=</span> displayedNum
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>firstValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>previousKeyType <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      secondValue <span class="token operator">=</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>modValue
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>modValue <span class="token operator">=</span> secondValue
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>We can refactor this into the following:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'calculate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>modValue <span class="token operator">=</span> firstValue <span class="token operator">&amp;&amp;</span> previousKeyType <span class="token operator">===</span> <span class="token string">'calculate'</span>
    <span class="token operator">?</span> modValue
    <span class="token punctuation">:</span> displayedNum
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><p>As always, take note of the properties and variables used:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">updateCalculatorState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> calculator</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Variables and properties needed</span>
  <span class="token comment">// 1. key</span>
  <span class="token comment">// 2. calculator</span>
  <span class="token comment">// 3. calculatedValue</span>
  <span class="token comment">// 4. displayedNum</span>
  <span class="token comment">// 5. modValue</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><h3 id="passing-in-necessary-variables-1">Passing in necessary variables</h3><p>We know we need five variables/properties for <code>updateCalculatorState</code>:</p><ol><li><code>key</code></li><li><code>calculator</code></li><li><code>calculatedValue</code></li><li><code>displayedNum</code></li><li><code>modValue</code></li></ol><p>Since <code>modValue</code> can be retrieved from <code>calculator.dataset</code>, we only need to pass in four values:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">updateCalculatorState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> calculator<span class="token punctuation">,</span> calculatedValue<span class="token punctuation">,</span> displayedNum</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

keys<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
  
  <span class="token keyword">const</span> key <span class="token operator">=</span> e<span class="token punctuation">.</span>target
  <span class="token keyword">const</span> displayedNum <span class="token operator">=</span> display<span class="token punctuation">.</span>textContent
  <span class="token keyword">const</span> resultString <span class="token operator">=</span> <span class="token function">createResultString</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> displayedNum<span class="token punctuation">,</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">)</span>
  
  display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> resultString
  
  <span class="token comment">// Pass in necessary values</span>
  <span class="token function">updateCalculatorState</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> calculator<span class="token punctuation">,</span> resultString<span class="token punctuation">,</span> displayedNum<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><!--kg-card-end: code--><h3 id="refactoring-updatecalculatorstate-again">Refactoring updateCalculatorState again</h3><p>We changed three kinds of values in <code>updateCalculatorState</code>:</p><ol><li><code>calculator.dataset</code></li><li>The class for pressing/depressing operators</li><li><code>AC</code> vs <code>CE</code> text</li></ol><p>If you want to make it cleaner, you can split (2) and (3) into another function — <code>updateVisualState</code>. Here's what <code>updateVisualState</code> can look like:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js"><span class="token keyword">const</span> <span class="token function-variable function">updateVisualState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> calculator</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> keyType <span class="token operator">=</span> <span class="token function">getKeyType</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">k</span> <span class="token operator">=&gt;</span> k<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'is-depressed'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'operator'</span><span class="token punctuation">)</span> key<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'is-depressed'</span><span class="token punctuation">)</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">===</span> <span class="token string">'clear'</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span>textContent <span class="token operator">!==</span> <span class="token string">'AC'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    key<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'AC'</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>keyType <span class="token operator">!==</span> <span class="token string">'clear'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> clearButton <span class="token operator">=</span> calculator<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'[data-action=clear]'</span><span class="token punctuation">)</span>
    clearButton<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'CE'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><!--kg-card-end: code--><h3 id="wrapping-up">Wrapping up</h3><p>The
 code become much cleaner after the refactor. If you look into the event
 listener, you’ll know what each function does. Here’s what the event 
listener looks like at the end:</p><!--kg-card-begin: code--><pre class=" language-js"><code class=" language-js">keys<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
  <span class="token keyword">const</span> key <span class="token operator">=</span> e<span class="token punctuation">.</span>target
  <span class="token keyword">const</span> displayedNum <span class="token operator">=</span> display<span class="token punctuation">.</span>textContent
  
  <span class="token comment">// Pure functions</span>
  <span class="token keyword">const</span> resultString <span class="token operator">=</span> <span class="token function">createResultString</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> displayedNum<span class="token punctuation">,</span> calculator<span class="token punctuation">.</span>dataset<span class="token punctuation">)</span>
  
  <span class="token comment">// Update states</span>
  display<span class="token punctuation">.</span>textContent <span class="token operator">=</span> resultString
  <span class="token function">updateCalculatorState</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> calculator<span class="token punctuation">,</span> resultString<span class="token punctuation">,</span> displayedNum<span class="token punctuation">)</span>
  <span class="token function">updateVisualState</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> calculator<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><!--kg-card-end: code--><p>You can grab the source code for the refactor part through <a href="https://zellwk.com/blog/calculator-part-3" rel="noopener">this link</a> (scroll down and enter your email address in the box, and I’ll send the source codes right to your mailbox).</p><p>I hope you enjoyed this article. If you did, you might love <a href="https://learnjavascript.today/" rel="noopener">Learn JavaScript</a>—a course where I show you how to build 20 components, step by step, like how we built this calculator today.</p><p>Note:
 we can improve the calculator further by adding keyboard support and 
accessibility features like Live regions. Want to find out how? Go check
 out Learn JavaScript :)</p>
                </div>
            </section>


            
<div class="social-row">
    <button class="twitter" onclick="window.open('https://twitter.com/share?text=How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript&amp;url=https://www.freecodecamp.org/news/how-to-build-an-html-calculator-app-from-scratch-using-javascript-4454b8714b98/', 'share-twitter', 'width=550,height=235');return false;">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
    <path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"></path>
    </svg> <span>&nbsp;Tweet this to your followers</span></button>
    <div></div>
    <button class="email" onclick="window.location.href = 'mailto:?subject=helpful freeCodeCamp article: How to build an HTML calculator app from scratch using JavaScript  &amp;body=How to build an HTML calculator app from scratch using JavaScript https://www.freecodecamp.org/news/how-to-build-an-html-calculator-app-from-scratch-using-javascript-4454b8714b98/';">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid meet" viewBox="0 0 640 640" width="32" height="32">
    <defs>
        <path d="M0 100L640 100L320 360L0 100Z" id="b1cw6CIsqS"></path>
        <path d="M0 537.18L0 160L320 420L640 160L640 541.1L0 537.18Z" id="aAHuzNbff"></path>
    </defs>
    <g>

        <use xlink:href="#b1cw6CIsqS" opacity="1" fill-opacity="1"></use>
        <path d="M0 100L640 100L320 360L0 100Z" id="c2GF8nL4hl" fill="white" fill-opacity="1" filter="url(#shadow605849)"></path>
        <use xlink:href="#aAHuzNbff" opacity="1" fill-opacity="1"></use>
        <path d="M0 537.18L0 160L320 420L640 160L640 541.1L0 537.18Z" id="a5mitN1KH" fill="white" fill-opacity="1" filter="url(#shadow15043397)"></path>

    </g>
</svg> <span>Email this to a friend</span></button>

    <div></div>
    <button class="facebook" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=https://www.freecodecamp.org/news/author/freecodecamp/', 'share-facebook','width=580,height=296');return false;">
        <!-- Facebook Filled icon by Icons8 -->



<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid meet" viewBox="0 0 640 640" width="32" height="32">
    <defs>
        <path d="M640 321.89C640 482.61 523.62 615.43 369.16 638.11C368.42 630.47 367.98 556.08 367.83 414.93C395.49 414.61 420.42 414.27 442.61 413.9C446.4 380.3 452.55 347.37 456.62 323.22C425.51 322.93 388.88 323.31 367.83 323.22C368.37 281.18 368.35 303.77 367.83 262.54C372.62 222.64 384.99 209.96 459.86 213.65C459.57 203.36 460.61 151.4 459.86 133.3C460.87 134.09 279.13 86.74 269.33 241.43C268.52 265.86 268.65 290.49 269.33 323.22C265.63 322.84 238.44 322.84 187.75 323.22L187.75 414.93L269.33 414.93C270.65 564.06 270.21 638.45 268 638.11C114.78 614.35 0 481.73 0 321.89C0 145.28 143.39 1.89 320 1.89C496.61 1.89 640 145.28 640 321.89Z" id="bS1mFenfS"></path>
    </defs>
    <g>
        <g>
            <g>
                <use xlink:href="#bS1mFenfS"></use>
            </g>
        </g>
    </g>
</svg> <span>Share this with your friends</span></button>
</div>
            <script type="text/javascript">
                function loadDiscourseComments() {
                    document.getElementById('discourse-comments').innerHTML = '';
                    DiscourseEmbed = {
                        discourseUrl: 'https://www.freecodecamp.org/forum/',
                        discourseEmbedUrl: 'https://www.freecodecamp.org/news/how-to-build-an-html-calculator-app-from-scratch-using-javascript-4454b8714b98/'
                    };
                    var d = document.createElement('script'); d.type = 'text/javascript'; d.async = true;
                    d.src = DiscourseEmbed.discourseUrl + 'javascripts/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(d);
                }
                if (window && window.addEventListener) {
                    window.addEventListener('load', function () {
                        document.getElementById('trigger-load-comments').onclick = loadDiscourseComments;
                    });
                }
            </script>

            <div id="discourse-comments">
                <button id="trigger-load-comments">Show comments</button>
            </div>

        </article>
    </div>
</main>





<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            <article class="read-next-card" style="background-image: url(/news/content/images/size/w600/2019/06/background.png)">
                <header class="read-next-card-header">
                    <p class="read-next-card-header-sitetitle">Countinue reading about</p>
                    <h3 class="read-next-card-header-title"><a href="https://www.freecodecamp.org/news/tag/javascript/">JavaScript</a></h3>
                </header>
                <div class="read-next-card-content">
                    <ul>
                        <li><a href="https://www.freecodecamp.org/news/the-guaranteed-fastest-way-to-break-into-web-development/">The Guaranteed Fastest Way to Break into Web Development</a></li>
                        <li><a href="https://www.freecodecamp.org/news/creating-a-crud-to-do-app-using-ionic-4/">Creating a CRUD To-do App Using Ionic 4</a></li>
                        <li><a href="https://www.freecodecamp.org/news/angular-rxjs-in-depth/">Angular RxJS In-Depth</a></li>
                    </ul>
                </div>
                <footer class="read-next-card-footer">
                    <a href="https://www.freecodecamp.org/news/tag/javascript/">See all 1457 posts
                        →</a>
                </footer>
            </article>

            <article class="post-card post tag-javascript tag-react tag-tech tag-front-end-development tag-programming ">

    <a class="post-card-image-link" href="https://www.freecodecamp.org/news/how-to-conquer-webpack-4-and-build-a-sweet-react-app-236d721e6745/">
        <img class="post-card-image" srcset="https://cdn-images-1.medium.com/max/800/1*VuWmde9oMOIIIHjaRj1vDA.jpeg 300w,
                    https://cdn-images-1.medium.com/max/800/1*VuWmde9oMOIIIHjaRj1vDA.jpeg 600w,
                    https://cdn-images-1.medium.com/max/800/1*VuWmde9oMOIIIHjaRj1vDA.jpeg 1000w,
                    https://cdn-images-1.medium.com/max/800/1*VuWmde9oMOIIIHjaRj1vDA.jpeg 2000w" sizes="(max-width: 1000px) 400px, 700px" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/1VuWmde9oMOIIIHjaRj1vDA.jpeg" alt="How to conquer Webpack 4 and build a sweet React app">
    </a>

    <div class="post-card-content">

        <div class="post-card-content-link">

            <header class="post-card-header">
                <span class="post-card-tags">
                    <a href="https://www.freecodecamp.org/news/tag/javascript/">
                        #JavaScript
                    </a>
                </span>
                <h2 class="post-card-title">
                    <a href="https://www.freecodecamp.org/news/how-to-conquer-webpack-4-and-build-a-sweet-react-app-236d721e6745/">
                        How to conquer Webpack 4 and build a sweet React app
                    </a>
                </h2>
            </header>

        </div>


        <footer class="post-card-meta">

            <ul class="author-list">
                <li class="author-list-item">

                    <div class="author-name-tooltip">
                        Adeel Imran
                    </div>

                    <a href="https://www.freecodecamp.org/news/author/adeel/" class="static-avatar">
                        <img class="author-profile-image" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/FkHoWg32_400x400.jpg" alt="Adeel Imran">
                    </a>
                </li>
            </ul>

            <a class="meta-item" href="https://www.freecodecamp.org/news/author/adeel/">Adeel Imran</a>
            <time class="meta-item">a year ago</time>



        </footer>

    </div>

</article>
            <article class="post-card post tag-web-development tag-css tag-tech tag-programming tag-web-design ">

    <a class="post-card-image-link" href="https://www.freecodecamp.org/news/get-started-with-css-in-5-minutes-e0804813fc3e/">
        <img class="post-card-image" srcset="https://cdn-images-1.medium.com/max/800/1*s2XVUr_QAwNKET1JPOZeEg.jpeg 300w,
                    https://cdn-images-1.medium.com/max/800/1*s2XVUr_QAwNKET1JPOZeEg.jpeg 600w,
                    https://cdn-images-1.medium.com/max/800/1*s2XVUr_QAwNKET1JPOZeEg.jpeg 1000w,
                    https://cdn-images-1.medium.com/max/800/1*s2XVUr_QAwNKET1JPOZeEg.jpeg 2000w" sizes="(max-width: 1000px) 400px, 700px" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/1s2XVUr_QAwNKET1JPOZeEg.jpeg" alt="Learn CSS in 5 minutes - A tutorial for beginners">
    </a>

    <div class="post-card-content">

        <div class="post-card-content-link">

            <header class="post-card-header">
                <span class="post-card-tags">
                    <a href="https://www.freecodecamp.org/news/tag/web-development/">
                        #Web Development
                    </a>
                </span>
                <h2 class="post-card-title">
                    <a href="https://www.freecodecamp.org/news/get-started-with-css-in-5-minutes-e0804813fc3e/">
                        Learn CSS in 5 minutes - A tutorial for beginners
                    </a>
                </h2>
            </header>

        </div>


        <footer class="post-card-meta">

            <ul class="author-list">
                <li class="author-list-item">

                    <div class="author-name-tooltip">
                        Per Harald Borgen
                    </div>

                    <a href="https://www.freecodecamp.org/news/author/per/" class="static-avatar">
                        <img class="author-profile-image" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/per.jpg" alt="Per Harald Borgen">
                    </a>
                </li>
            </ul>

            <a class="meta-item" href="https://www.freecodecamp.org/news/author/per/">Per Harald Borgen</a>
            <time class="meta-item">a year ago</time>



        </footer>

    </div>

</article>
        </div>
    </div>
</aside>




        <footer class="site-footer">
    <div class="footer-container">
        <div class="footer-row">
            <div class="footer-desc-col">
                <p>freeCodeCamp is a donor-supported tax-exempt 501(c)(3)
                    nonprofit organization (United States Federal Tax
                    Identification Number: 82-0779546)
                </p>
                <p>
                    Our mission: to help people learn to code for free. We
                    accomplish this by creating thousands of videos, articles, and
                    interactive coding lessons - all freely available to the
                    public. We also have thousands of freeCodeCamp study groups
                    around the world.
                </p>
                <p>
                    Donations to freeCodeCamp go toward our education initiatives,
                    and help pay for servers, services, and staff. You can&nbsp;<a href="https://freecodecamp.org/donate" class="inline" rel="noopener noreferrer" target="_blank">make a tax-deductible donation here</a>.
                </p>
            </div>
            <div class="footer-col-1">
                <div class="col-header">Our Nonprofit</div>
                <a href="https://freecodecamp.org/about">About</a><a href="https://freecodecamp.org/donate">Donate</a><a href="https://freecodecamp.org/shop" rel="noopener noreferrer" target="_blank">Shop</a><a href="https://sponsors.freecodecamp.org/">Sponsors</a><a href="mailto:team@freecodecamp.org">Email
                    Us</a>
            </div>
            <div class="footer-col-2">
                <div class="col-header">Our Community</div>
                <a href="https://freecodecamp.org/news" rel="noopener noreferrer" target="_blank">News</a><a href="https://www.linkedin.com/school/free-code-camp/people/" rel="noopener noreferrer" target="_blank">Alumni Network</a><a href="https://study-group-directory.freecodecamp.org/" rel="noopener noreferrer" target="_blank">Study Groups</a><a href="https://freecodecamp.org/forum" rel="noopener noreferrer" target="_blank">Forum</a><a href="https://gitter.im/FreeCodeCamp/home" rel="noopener noreferrer" target="_blank">Gitter</a><a href="https://github.com/freeCodeCamp/" rel="noopener noreferrer" target="_blank">GitHub</a><a href="https://freecodecamp.org/support">Support</a><a href="https://freecodecamp.org/academic-honesty">Academic Honesty</a><a href="https://freecodecamp.org/code-of-conduct">Code of Conduct</a><a href="https://freecodecamp.org/privacy-policy">Privacy Policy</a><a href="https://freecodecamp.org/terms-of-service">Terms of Service</a>
            </div>
            <div class="footer-col-3">
                <div class="col-header">Our Learning Resources</div>
                <a href="https://learn.freecodecamp.org/">Learn</a><a href="https://guide.freecodecamp.org/">Guide</a><a href="https://www.youtube.com/freecodecamp" rel="noopener noreferrer" target="_blank">Youtube</a><a href="https://podcast.freecodecamp.org/" rel="noopener noreferrer" target="_blank">Podcast</a><a href="https://twitter.com/freecodecamp" rel="noopener noreferrer" target="_blank">Twitter</a><a href="https://instagram.com/freecodecamp" rel="noopener noreferrer" target="_blank">Instagram</a>
            </div>
        </div>
    </div>
</footer>
    </div>


    <script>
        var images = document.querySelectorAll('.kg-gallery-image img');
        images.forEach(function (image) {
            var container = image.closest('.kg-gallery-image');
            var width = image.attributes.width.value;
            var height = image.attributes.height.value;
            var ratio = width / height;
            container.style.flex = ratio + ' 1 0%';
        })
    </script>


    <script src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/jquery-3.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous">
        </script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/jquery.js"></script>

    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-unescaped-markup.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-markup-templating.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-bash.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-c.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-clojure.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-cpp.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-csharp.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-css.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-docker.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-elixir.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-erlang.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-git.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-go.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-graphql.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-haskell.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-java.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-javascript.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-json.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-jsx.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-kotlin.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-lua.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-markup.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-php.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-python.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-r.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-ruby.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-rust.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-scala.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-sql.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-swift.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-typescript.js"></script>
    <script type="text/javascript" src="How%20to%20build%20an%20HTML%20calculator%20app%20from%20scratch%20using%20JavaScript_files/prism-yaml.js"></script>

    <script>
    $(document).ready(function () {
        // Start fitVids
        var $postContent = $(".post-full-content");
        $postContent.fitVids();
        // End fitVids
    });
</script>

<script>
    $(document).ready(function () {
        $(".toggle-button-nav").click(function () {
            $(".nav").toggleClass("show-main-nav-items");
            $(".site-nav").toggleClass("expand-nav");
            $(".toggle-button-nav").toggleClass("reverse-toggle-color");
            $(".site-nav-left").toggleClass("display-search");
        });
    });
</script>


    



</body></html>